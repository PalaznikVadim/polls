<nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4">
  <div class="collapse navbar-collapse" id="navbarCollapse">
<!--    <ul class="navbar-nav mr-auto">-->
<!--      <li class="nav-item active">-->
<!--        <button type="button" class="btn btn-outline-light" (click)="openModal(template)">New poll</button>-->
<!--      </li>-->
<!--    </ul>-->
<!--    <form class="form-inline mt-2 mt-md-0">-->
<!--      <select class="browser-default custom-select">-->
<!--        <option selected>sort</option>-->
<!--        <option value="1">Date of addition</option>-->
<!--      </select>-->
<!--      <button class="btn btn-success ml-1">Sort</button>-->
<!--    </form>-->
    <ul class="navbar-nav mr-0 ml-auto">
      <li class="nav-item active">
        <button type="button" class="btn btn-outline-light" routerLink="/">Exit</button>
      </li>
    </ul>
  </div>
</nav>

<div class="album py-2 bg-transparent">
  <div class="container">
    <div class="row mb-4">
      <div class="col-3">
        <button type="button" class="btn btn-success float-left" (click)="openModal(template)">New poll</button>
      </div>
      <div class="col-7 ">
        <form class="form-inline justify-content-center">
          <select class="browser-default custom-select">
            <option selected>sort</option>
            <option value="1">Date of addition</option>
          </select>
          <button class="btn btn-success ml-1">Sort</button>
        </form>
      </div>
    </div>
    <div class="row justify-content-center">
      <div *ngIf="polls.length==0;else unset">
        <h3 class="mt-5">This page is empty. Create a poll!</h3>
      </div>
    </div>
    <div *ngIf="polls.length!=0" class="row justify-content-center mt-5 ">
        <pagination [boundaryLinks]="true" [itemsPerPage]="page.size" [totalItems]="page.totalElements"  (pageChanged)="pageChanged($event)" [(ngModel)]="currentPage"
                    previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;">
        </pagination>
    </div>
  </div>
</div>

<ng-template #unset>
  <div class="col-4 "  *ngFor="let poll of polls;let i=index;">
    <div class="card border-info  mb-3" style="max-width: 18rem;">
      <div class="card-header color-card border-info"><h5>{{poll.name}}</h5></div>
        <div class="card-body">
          <h6 class="card-text">Theme: {{poll.theme}}</h6>
          <p class="card-text">Description: {{poll.description}}</p>
          <div *ngIf="poll.status!='blocked'" class="alert alert-success">Status: {{poll.status}}</div>
          <div *ngIf="poll.status=='blocked'" class="alert alert-danger">Status: {{poll.status}}</div>
          <div class="float-right">
            <span>{{poll.date|date}}</span>
          </div>
        </div>
        <div class="card-footer color-card  border-info">
          <div class="btn-group btn-block">
            <button type="button" class="btn btn-sm btn-light" (click)="editPoll(poll.id,i)">Edit</button>
            <button type="button" class="btn btn-sm btn-light" (click)="transferToStats(poll.id,i)">Stats</button>
            <button type="button" class="btn btn-sm btn-danger" name="deletePoll" (click)="confirm(templateConfirm,poll.id,i)" >Delete</button>
          </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">How do you want to create a poll?</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <button class="btn btn-outline-success my-2 mr-2 my-sm-0" (click)="goToTemplates()">Poll by template</button>
    <button class="btn btn-outline-success my-2 my-sm-0" (click)="createNewPoll()">New poll</button>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modalRef.hide()">Cancel</button>
  </div>
</ng-template>

<ng-template #templateConfirm>
  <div class="modal-body text-center">
    <p>Do you want to delete this poll?</p>
    <button type="button" class="btn btn-default" (click)="deletePoll(idCurrPoll,indexCurrPoll)" >Yes</button>
    <button type="button" class="btn btn-primary" (click)="modalRef.hide()" >No</button>
  </div>
</ng-template>
